<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plasencia Handball – Gestión</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<header class="header">
  <h1 class="title">Plasencia Handball</h1>
  <nav class="nav" aria-label="Navegación principal">
    <button class="nav-btn" id="btnEquipos">Equipos</button>
    <button class="nav-btn" id="btnPartidos">Partidos</button>
    <button class="nav-btn" id="btnPodio">Podio</button>
    <button class="nav-btn" id="btnDirectos">Directos</button>
    <button class="nav-btn" id="btnClasificacion">Clasificación</button>
    <button class="nav-btn admin-btn" id="btnEntrarAdmin">Entrar Admin</button>
  </nav>
</header>

<main>
  <section id="teamsView" class="card view">
    <h2>Equipos</h2>
    <div id="teamsContainer" class="teams"></div>
  </section>

  <section id="matchesView" class="card view hidden">
    <h2>Partidos próximos</h2>
    <div id="matchList"></div>
    <p class="summary">En modo administrador puedes crear y editar partidos.</p>
  </section>

  <section id="podioView" class="card view hidden"><h2>Podio</h2></section>

  <section id="directosView" class="card view hidden">
    <h2>Directos</h2>
    <div id="directosDisplay"></div>
    <p class="summary">En modo admin puedes cambiar la URL del directo.</p>
  </section>

  <section id="clasificacionView" class="card view hidden"><h2>Clasificación</h2></section>

  <!-- Login modal -->
  <div id="adminModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="adminModalTitle">
    <div class="modal-content">
      <h3 id="adminModalTitle">Acceso administrador</h3>
      <input id="adminPassword" type="password" placeholder="Contraseña">
      <div class="modal-actions">
        <button id="cancelLogin" class="cancel-btn">Cancelar</button>
        <button id="submitLogin" class="ok-btn">Entrar</button>
      </div>
      <p id="loginError" class="error hidden">Contraseña incorrecta</p>
    </div>
  </div>

  <!-- Admin panel (hidden until login) -->
  <section id="adminSection" class="card hidden" aria-hidden="true">
    <div class="admin-top">
      <h2>Panel Administrador</h2>
      <div>
        <button id="btnLogout" class="cancel-btn">Salir Admin</button>
      </div>
    </div>

    <div class="admin-columns">
      <div class="admin-column">
        <h3>Equipos — Crear / Editar</h3>
        <form id="formAddTeam" class="admin-form">
          <input type="hidden" id="editingTeamId" value="">
          <label>Nombre del equipo
            <input id="teamName" required>
          </label>
          <label>Club / Ciudad
            <input id="teamClub">
          </label>
          <label>Categorías (coma separadas)
            <input id="teamCategories">
          </label>
          <label>Imagen (archivo)
            <input id="teamPhoto" type="file" accept="image/*">
          </label>
          <div id="photoPreviewContainer" class="hidden"><p>Previsualización:</p><img id="photoPreview"></div>
          <div class="form-row">
            <button type="submit" class="save-btn" id="saveTeamBtn">Guardar equipo</button>
            <button type="button" id="cancelEditTeam" class="cancel-btn hidden">Cancelar edición</button>
          </div>
        </form>

        <hr>
        <h4>Equipos existentes (clic en Editar para facilitar edición)</h4>
        <div id="adminTeamsList"></div>
      </div>

      <div class="admin-column">
        <h3>Partidos — Crear / Editar</h3>
        <form id="formAddMatch" class="admin-form">
          <input type="hidden" id="editingMatchId" value="">
          <label>Equipo local
            <select id="matchHome"></select>
          </label>
          <label>Equipo visitante
            <select id="matchAway"></select>
          </label>
          <label>Fecha y hora
            <input id="matchDate" type="datetime-local">
          </label>
          <label>Resultado (opcional) formato local:visitante
            <input id="matchResult" placeholder="2:1">
          </label>
          <div class="form-row">
            <button type="submit" class="save-btn" id="saveMatchBtn">Guardar partido</button>
            <button type="button" id="cancelEditMatch" class="cancel-btn hidden">Cancelar edición</button>
          </div>
        </form>

        <hr>
        <h4>Partidos existentes</h4>
        <div id="adminMatchesList"></div>

        <hr>
        <h3>Directos</h3>
        <form id="formDirectos" class="admin-form">
          <label>URL del directo
            <input id="directoUrl" placeholder="https://...">
          </label>
          <div style="margin-top:8px">
            <button type="submit" class="save-btn">Guardar URL</button>
          </div>
        </form>

        <hr>
        <h3>Backup / Restaurar</h3>
        <div style="display:flex;gap:8px;align-items:center">
          <button id="exportData" class="save-btn">Exportar JSON</button>
          <input id="importFile" type="file" accept="application/json">
        </div>

        <hr>
        <div style="margin-top:8px">
          <button id="clearAll" class="cancel-btn">Eliminar todo (equipos, partidos, directos)</button>
        </div>
      </div>
    </div>
  </section>

</main>

<script>
  // expose password constant to app.js loader
  window.APP_ADMIN_PASSWORD = "Pl4s3nc1a!Adm1n#2025";
</script>
<script src="app.js"></script>
</body>
</html>
